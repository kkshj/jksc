webpackJsonp([9],{"2yVn":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mMon"),o=s("eoeZ"),a=s("uVW5"),i=s("9rMa"),r={data:function(){return{message:"",load_show:!1,notice_show:"",user:null,patients:[],noMaster:!1}},components:{NoticeDialog:n.a,Notice:o.a,Loading:a.a},computed:Object(i.b)({header:function(t){return""===t.header&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.header},userInfo:function(t){return""===t.userInfo&&JSON.parse(localStorage.getItem("userInfo"))&&this.$store.commit("setUserInfo",JSON.parse(localStorage.getItem("userInfo"))),t.userInfo},userId:function(t){return""===t.userId&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.userId}}),activated:function(){console.log(this.userInfo),this.getInfo()},methods:{getInfo:function(){this.getFirstInfo()},getFirstInfo:function(){var t=this,e=this;if(this.userId){var s=this.$conf.url+"/internethospital/api/patients?user-id="+this.userId+"&page-index=1&page-size=100";this.$axios.get(s,{Authorization:"Bearer "+this.token}).then(function(s){if(console.log(s),s.status>=200&&s.status<=399){var n=s.data.content.filter(function(t){return!t.master}),o=s.data.content.find(function(t){return t.master});console.log(o),e.patients=n,t.userInfo&&(s.data.content.find(function(t){return t.master})||(console.log("nomaster"),e.noMaster=!0,o={avatar:e.userInfo.avatarUrl,name:e.userInfo.nickName,id:"me"})),e.user=o}})}else this.notice_show="请先完成注册，即将为您跳转到注册页面",setTimeout(function(){t.notice_show="",t.$router.push("/register-login")},2e3)},getToEidt:function(t){console.log(t);var e=void 0;"me"!==t&&1!=t?e=t?"/patient/edit?id="+t+"&noMaster="+this.noMaster:"/patient/edit?noMaster="+this.noMaster:1==t&&(e="/patient/edit"),this.$router.push(e)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[t.user?s("div",{staticClass:"self",on:{click:function(e){t.getToEidt(t.user.id)}}},[t.user.avatar?s("img",{staticClass:"left",attrs:{src:t.user.avatar}}):s("img",{staticClass:"left",attrs:{src:"static/images/defualt-header.png"}}),t._v(" "),s("div",{staticClass:"left"},[t._v(t._s(t.user.name)),s("span",[t._v("（我自己）")])])]):t._e(),t._v(" "),s("span",{staticClass:"title"},[t._v("其它就诊人")]),t._v(" "),t.patients?s("div",{staticClass:"section"},t._l(t.patients,function(e,n){return s("li",{key:e.id,on:{click:function(s){t.getToEidt(e.id)}}},[s("span",[t._v(t._s(e.name))])])})):t._e(),t._v(" "),s("div",{staticClass:"addOne"},[s("button",{on:{click:function(e){t.getToEidt(1)}}},[t._v("添加就诊人")])]),t._v(" "),s("notice",{directives:[{name:"show",rawName:"v-show",value:t.notice_show,expression:"notice_show"}],attrs:{message:t.notice_show}}),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.load_show,expression:"load_show"}]})],1)},staticRenderFns:[]};var u=s("C7Lr")(r,c,!1,function(t){s("Q53d")},"data-v-f87eb4be",null);e.default=u.exports},Q53d:function(t,e){}});
//# sourceMappingURL=9.7959dc9be01f30d6bc1a.js.map