webpackJsonp([25],{"1flT":function(t,e){},re98:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("mMon"),i=s("eoeZ"),n=s("uVW5"),a=s("9rMa"),c={data:function(){return{load_show:!1,notice_show:"",couponList:[],showType:"AVAILABLE"}},components:{NoticeDialog:o.a,Notice:i.a,Loading:n.a},computed:Object(a.b)({header:function(t){return""===t.header&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.header},userId:function(t){return""===t.userId&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.userId}}),activated:function(){console.log(555),this.getInfo()},methods:{getInfo:function(){this.getFirstInfo("AVAILABLE")},getFirstInfo:function(t){var e=this,s=this.$conf.url+"/internethospital/api/inventories/coupons?user-id="+this.userId+"&page-index=1&page-size=10000";this.$axios.post(s,{},{headers:this.$store.state.header}).then(function(s){var o=s.data.content;for(var i in console.log(s),o="AVAILABLE"===t?o.filter(function(t){return"AVAILABLE"===t.status||"CREATED"===t.status}):o.filter(function(e){return e.status===t}))o[i].amount=o[i].amount.toString().replace("-",""),o[i].startTime=o[i].startTime.slice(0,o[i].startTime.indexOf(" ")),o[i].startTime=o[i].startTime.replace(/-/g,"."),o[i].endTime=o[i].endTime.slice(0,o[i].endTime.indexOf(" ")),o[i].endTime=o[i].endTime.replace(/-/g,"."),o[i].showUseNotice=!1;e.couponList=o}).catch(function(t){e.notice_show=t.response.data.message,setTimeout(function(){e.notice_show=""},2e3)})},showOrHideUseNotice:function(t){var e=t,s=this.couponList;for(var o in s)s[o].id===e&&(s[o].showUseNotice=!s[o].showUseNotice);this.couponList=s},changeShowType:function(t){this.showType=t,console.log(this.showType),this.getFirstInfo(t)},getToDoctor:function(){this.$router.push("/doctor?type=CONSULT")}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"top-nav-bar"},[s("button",{class:"AVAILABLE"===t.showType?"chosen":"",attrs:{"data-type":"AVAILABLE"},on:{click:function(e){t.changeShowType("AVAILABLE")}}},[t._v("未使用"),s("span")]),t._v(" "),s("button",{class:"USED"===t.showType?"chosen":"",on:{click:function(e){t.changeShowType("USED")}}},[t._v("已使用"),s("span")]),t._v(" "),s("button",{class:"EXPIRED"===t.showType?"chosen":"",attrs:{"data-type":"EXPIRED"},on:{click:function(e){t.changeShowType("EXPIRED")}}},[t._v("已过期"),s("span")])]),t._v(" "),s("div",{staticClass:"section"},t._l(t.couponList,function(e,o){return s("div",{key:e.id,staticClass:"coupon-item"},["AVAILABLE"===e.status?s("img",{attrs:{src:"static/images/coupon-for-all.png"}}):t._e(),t._v(" "),"AVAILABLE"!==e.status?s("img",{attrs:{src:"static/images/coupon-used.png"}}):t._e(),t._v(" "),s("div",{staticClass:"basic-info"},[s("div",{staticClass:"left"},[t._v("￥"),s("span",[t._v(t._s(e.amount))])]),t._v(" "),s("div",{staticClass:"left"},[s("span",[t._v(t._s(e.text))]),t._v(" "),s("span",[t._v(t._s(e.startTime)+"-"+t._s(e.endTime))])]),t._v(" "),"AVAILABLE"===e.status?s("button",{staticClass:"right",on:{click:t.getToDoctor}},[t._v("去使用")]):t._e(),t._v(" "),"EXPIRED"===e.status?s("img",{staticClass:"right",attrs:{src:"static/images/coupon-overdue.png"}}):t._e(),t._v(" "),e.longText?s("button",{staticClass:"show-use-notice",on:{click:function(s){t.showOrHideUseNotice(e.id)}}},[t._v("使用须知"),e.showUseNotice?s("img",{staticClass:"right",attrs:{src:"static/images/coupon-notice-close.png"}}):s("img",{staticClass:"right",attrs:{src:"static/images/coupon-notice-open.png"}})]):t._e()]),t._v(" "),e.showUseNotice?s("div",{staticClass:"use-notice"},[t._v(t._s(e.longText))]):t._e()])})),t._v(" "),s("notice",{directives:[{name:"show",rawName:"v-show",value:t.notice_show,expression:"notice_show"}],attrs:{message:t.notice_show}}),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.load_show,expression:"load_show"}]})],1)},staticRenderFns:[]};var u=s("C7Lr")(c,r,!1,function(t){s("1flT")},"data-v-3be9c29e",null);e.default=u.exports}});
//# sourceMappingURL=25.82e11dd0cbe90001a2a6.js.map