{"version":3,"sources":["webpack:///src/components/address/list.component.vue","webpack:///./src/components/address/list.component.vue?e9ad","webpack:///./src/components/address/list.component.vue"],"names":["list_component","name","components","NoticeDialog","notice_dialog_component","Notice","notice_component","Loading","loading_component","computed","Object","vuex_esm","userId","state","this","$store","commit","JSON","parse","localStorage","getItem","header","data","addressList","choseAdd","notice","deleteId","activated","getInfo","$route","query","type","beforeRouteLeave","to","from","next","$destroy","methods","getAddresses","_this","url","$conf","$axios","get","headers","then","res","i","console","log","address","replace","catch","err","response","message","setTimeout","toDefault","id","_this2","find","add","defaultAddress","put","deleteAddress","bol","_this3","delete","chooseAddress","setItem","$router","back","jumpTo","route","arguments","length","undefined","push","address_list_component","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","src","_v","_e","scroll-y","_l","item","on","click","$event","_s","recipient","phone","button-confirm-text","button-cancel-text","touchConfirm","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.65910500683f781f9496.js","sourcesContent":["<template>\r\n    <div class=\"page\">\r\n      <div class='emp' v-if='addressList.length === 0'>\r\n        <img src='/static/images/empty-address.png'>\r\n        <span>你还没有添加配送地址</span>\r\n      </div>\r\n      <ul scroll-y class='section'>\r\n        <li v-for='item in addressList' @click='chooseAddress(item.id)'>\r\n          <span>{{item.recipient}}&nbsp;&nbsp;&nbsp;&nbsp;{{item.phone}}</span>\r\n          <span>{{item.address}}</span>\r\n          <div v-if=\"!choseAdd\">\r\n            <div class='left' @click='toDefault(item.id)'>\r\n              <img class='left' src='/static/images/address-default.png' v-if='item.defaultAddress'>\r\n              <img class='left' src='/static/images/address-to-default.png' v-else>\r\n              <span class='left'>{{item.defaultAddress ? '默认地址' : '设为默认地址'}}</span>\r\n            </div>\r\n            <div class='right' @click='deleteId = item.id'>\r\n              <img class='left' src='/static/images/delete-line.png'>\r\n              <span class='left'>删除</span>\r\n            </div>\r\n            <div class='right' @click='jumpTo(\"address\", item.id)'>\r\n              <img class='left' src='/static/images/edit-line.png'>\r\n              <span class='left'>编辑</span>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <div class='btn-box'>\r\n        <button @click='jumpTo(\"address\")'>新增地址</button>\r\n      </div>\r\n      <notice v-if=\"notice\" :message=\"notice\"></notice>\r\n      <notice-dialog v-if=\"deleteId\" message=\"确定要删除该配送地址吗？\" button-confirm-text=\"确定\" button-cancel-text=\"取消\" @touchConfirm=\"deleteAddress\"></notice-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import NoticeDialog from '../notice-dialog.component'\r\n  import Notice from '../notice.component'\r\n  import Loading from '../loading.component'\r\n  import { mapState } from 'vuex'\r\n  export default {\r\n    name: \"list\",\r\n    components: {\r\n      NoticeDialog,\r\n      Notice,\r\n      Loading\r\n    },\r\n    computed: mapState({\r\n      userId (state) {\r\n        if (state.userId === '') {\r\n          this.$store.commit('setUser', JSON.parse(localStorage.getItem('loginInfo')));\r\n        }\r\n        return state.userId\r\n      },\r\n      header (state) {\r\n        if (state.header === '') {\r\n          this.$store.commit('setUser', JSON.parse(localStorage.getItem('loginInfo')));\r\n        }\r\n        return state.header\r\n      }\r\n    }),\r\n    data () {\r\n      return{\r\n        addressList:[],\r\n        choseAdd: false,\r\n        notice: '',\r\n        deleteId: ''\r\n      }\r\n    },\r\n    activated () {\r\n      this.getInfo();\r\n      if (this.$route.query.type === 'choose') {\r\n        this.choseAdd = true;\r\n      }\r\n    },\r\n    beforeRouteLeave(to, from, next){\r\n      this.$destroy();\r\n      next();\r\n    },\r\n    methods: {\r\n      getInfo () {\r\n        this.getAddresses();\r\n      },\r\n      getAddresses () {\r\n        const url = `${this.$conf.url}/internethospital/api/user/${this.userId}/shipping-addresses`;\r\n        this.$axios.get(url, {headers: this.header}).then(res => {\r\n          console.log(res);\r\n          for (let i in res.data) {\r\n            res.data[i].address = res.data[i].address.replace('|', '');\r\n          }\r\n          this.addressList = res.data;\r\n        }).catch(err => {\r\n          this.notice = err.response.data.message;\r\n          setTimeout(()=>{\r\n            this.notice = ''\r\n          }, 2000)\r\n        })\r\n      },\r\n      toDefault (id) {\r\n        let address = this.addressList.find(add => add.id === id);\r\n        if (!address.defaultAddress) {\r\n          const url = `${this.$conf.url}/internethospital/api/user/${this.userId}/shipping-addresses/${id}`;\r\n          address.defaultAddress = true;\r\n          delete address.id;\r\n          this.$axios.put(url, address,  {headers: this.header}).then(res => {\r\n            this.notice = '设置成功';\r\n            setTimeout(()=>{\r\n              this.notice = '';\r\n              this.getInfo();\r\n            }, 2000)\r\n          }).catch(err => {\r\n            this.notice = err.response.data.message;\r\n            setTimeout(()=>{\r\n              this.notice = '';\r\n              this.getInfo();\r\n            }, 2000)\r\n          })\r\n        }\r\n      },\r\n      deleteAddress (bol) {\r\n        if (bol) {\r\n          const url = `${this.$conf.url}/internethospital/api/user/{userId}/shipping-addresses/${this.deleteId}`;\r\n          this.$axios.delete(url,  {headers: this.header}).then(res => {\r\n            this.deleteId = \"\";\r\n            this.notice = \"删除成功\";\r\n            setTimeout(()=>{\r\n              this.notice = '';\r\n              this.getInfo();\r\n            }, 2000)\r\n          }).catch(err => {\r\n            this.notice = err.response.data.message;\r\n            setTimeout(()=>{\r\n              this.notice = ''\r\n              this.getInfo();\r\n            }, 2000)\r\n          })\r\n        } else {\r\n          this.deleteId = \"\"\r\n        }\r\n      },\r\n      chooseAddress (id) {\r\n        if (this.choseAdd) {\r\n          localStorage.setItem('addressId', id);\r\n          this.$router.back()\r\n        }\r\n      },\r\n      jumpTo (route, id = 'create') {\r\n        this.$router.push(`/${route}/${id}`);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @function vm($px) {\r\n    @return ($px / 750) * 100vw;\r\n  }\r\n  .page{\r\n    height: calc(100vh - 13.06vw);\r\n  }\r\n\r\n  li{\r\n    display: block;\r\n    background-color: #ffffff;\r\n    padding: vm(30) vm(30) vm(20);\r\n    margin-top: vm(20);\r\n  }\r\n  li:last-child{\r\n    margin-bottom: vm(20);\r\n  }\r\n  li::after{\r\n    content: '';\r\n    display: block;\r\n    clear: both;\r\n  }\r\n  li>span{\r\n    display: block;\r\n  }\r\n  li>span:first-child{\r\n    font-size: vm(30);\r\n    font-weight: bold;\r\n  }\r\n  li>span:nth-child(2){\r\n    font-size: vm(26);\r\n    color: #666666;\r\n    margin-top: vm(20);\r\n  }\r\n  li>div:last-child{\r\n    margin-top: vm(20);\r\n    border-top: #e2e2e2 vm(1) solid;\r\n    padding-top: vm(15);\r\n  }\r\n  li>div:last-child::after{\r\n    content: '';\r\n    display: block;\r\n    clear: both;\r\n  }\r\n  li>div:last-child>div.left>img{\r\n    width: vm(48);\r\n    height: vm(48);\r\n    margin-right: vm(10);\r\n  }\r\n  li>div:last-child>div.left>span{\r\n    line-height: vm(50);\r\n    font-size: vm(26);\r\n    color: #999999;\r\n  }\r\n  li>div:last-child>div.right>img{\r\n    width: vm(28);\r\n    margin-top: vm(10);\r\n    margin-right: vm(10);\r\n  }\r\n  li>div:last-child>div.right>span{\r\n    line-height: vm(50);\r\n    font-size: vm(26);\r\n    color: #999999;\r\n  }\r\n  li>div:last-child>div.right{\r\n    margin-left: vm(55);\r\n  }\r\n\r\n  .btn-box>button{\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100vw;\r\n    height: vm(88);\r\n    border-radius: 0;\r\n    background-color: #16A9F6;\r\n    color: #ffffff;\r\n    font-size: vm(36);\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/address/list.component.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[(_vm.addressList.length === 0)?_c('div',{staticClass:\"emp\"},[_c('img',{attrs:{\"src\":\"/static/images/empty-address.png\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"你还没有添加配送地址\")])]):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"section\",attrs:{\"scroll-y\":\"\"}},_vm._l((_vm.addressList),function(item){return _c('li',{on:{\"click\":function($event){_vm.chooseAddress(item.id)}}},[_c('span',[_vm._v(_vm._s(item.recipient)+\"    \"+_vm._s(item.phone))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.address))]),_vm._v(\" \"),(!_vm.choseAdd)?_c('div',[_c('div',{staticClass:\"left\",on:{\"click\":function($event){_vm.toDefault(item.id)}}},[(item.defaultAddress)?_c('img',{staticClass:\"left\",attrs:{\"src\":\"/static/images/address-default.png\"}}):_c('img',{staticClass:\"left\",attrs:{\"src\":\"/static/images/address-to-default.png\"}}),_vm._v(\" \"),_c('span',{staticClass:\"left\"},[_vm._v(_vm._s(item.defaultAddress ? '默认地址' : '设为默认地址'))])]),_vm._v(\" \"),_c('div',{staticClass:\"right\",on:{\"click\":function($event){_vm.deleteId = item.id}}},[_c('img',{staticClass:\"left\",attrs:{\"src\":\"/static/images/delete-line.png\"}}),_vm._v(\" \"),_c('span',{staticClass:\"left\"},[_vm._v(\"删除\")])]),_vm._v(\" \"),_c('div',{staticClass:\"right\",on:{\"click\":function($event){_vm.jumpTo(\"address\", item.id)}}},[_c('img',{staticClass:\"left\",attrs:{\"src\":\"/static/images/edit-line.png\"}}),_vm._v(\" \"),_c('span',{staticClass:\"left\"},[_vm._v(\"编辑\")])])]):_vm._e()])})),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('button',{on:{\"click\":function($event){_vm.jumpTo(\"address\")}}},[_vm._v(\"新增地址\")])]),_vm._v(\" \"),(_vm.notice)?_c('notice',{attrs:{\"message\":_vm.notice}}):_vm._e(),_vm._v(\" \"),(_vm.deleteId)?_c('notice-dialog',{attrs:{\"message\":\"确定要删除该配送地址吗？\",\"button-confirm-text\":\"确定\",\"button-cancel-text\":\"取消\"},on:{\"touchConfirm\":_vm.deleteAddress}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-f2bcd144\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/address/list.component.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f2bcd144\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.component.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.component.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.component.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f2bcd144\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.component.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f2bcd144\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/address/list.component.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}