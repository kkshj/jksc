webpackJsonp([7],{"0HNt":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("mMon"),o=e("eoeZ"),r=e("uVW5"),c={name:"register-login",components:{NoticeDialog:s.a,Notice:o.a,Loading:r.a},data:function(){return{accountExist:!0,phoneErr:"unknown",accountErr:"unknown",passLength:"unknown",passErr:"unknown",name:"",password:"",confirmPassword:"",notice:""}},methods:{changeLoginType:function(){this.phoneErr="unknown",this.accountErr="unknown",this.passLength="unknown",this.passErr="unknown",this.accountExist=!this.accountExist},enterPhone:function(){var t=this;if(11===this.name.length){var n=this.$conf.url+"/users/channels/internet-hospital/micro-app/action/check-user-has-created?phone="+this.name;this.$axios.post(n,{}).then(function(n){return console.log(n.data),n.data&&!t.accountExist?(t.notice="账号已注册",t.accountErr="error",void setTimeout(function(){t.notice=""},2e3)):!n.data&&t.accountExist?(t.notice="尚未注册",t.accountErr="error",void setTimeout(function(){t.notice=""},2e3)):void(t.accountExist?t.accountErr="unknown":t.accountErr="success")})}},checkPhone:function(){var t=this;return/^1\d{10}$/g.test(this.name)?/^1\d{10}$/g.test(this.name)&&!this.accountExist?(this.phoneErr="success",!0):void(/^1\d{10}$/g.test(this.name)&&(this.phoneErr="unknown")):(this.phoneErr="error",this.notice="请输入十一位手机号",setTimeout(function(){t.notice=""},2e3),!1)},checkPassword:function(){var t=this;if(!this.accountExist)return this.password.length<6?(this.passLength="error",this.notice="请输入六位以上密码",setTimeout(function(){t.notice=""},2e3),!1):(this.passLength="success",!0);this.passLength="unknown"},onTapBtn:function(t){t?this.login("login"):this.register()},register:function(){},login:function(t){var n=this,e=this.$conf.url+"/users/channels/internet-hospital/token",s={username:this.name,password:this.password};this.$axios.post(e,s).then(function(t){console.log(t),n.$store.commit("setUser",t.data),n.jumpTo("home")}).catch(function(t){n.notice=t.response.data.message,setTimeout(function(){n.notice=""},2e3)})},jumpTo:function(t,n){n?this.$router.push("/"+t+"/"+n):this.$router.push("/"+t)}}},i={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"page"},[t._m(0),t._v(" "),s("img",{attrs:{src:e("Jng+")}}),t._v(" "),s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],class:"error"===t.phoneErr||"error"===t.accountErr?"error":"success"===t.phoneErr&&"success"===t.accountErr?"success":"",attrs:{placeholder:"请输入手机号",type:"tel",maxlength:"11"},domProps:{value:t.name},on:{input:[function(n){n.target.composing||(t.name=n.target.value)},t.enterPhone],focusout:t.checkPhone}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:"error"===t.passLength?"error":"success"===t.passLength?"success":"",attrs:{type:"password",placeholder:"请输入你的密码"},domProps:{value:t.password},on:{focusout:t.checkPassword,input:function(n){n.target.composing||(t.password=n.target.value)}}}),t._v(" "),t.accountExist?t._e():s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],class:"error"===t.passErr?"error":"success"===t.passErr?"success":"",attrs:{type:"password",placeholder:"请确认你的密码"},domProps:{value:t.confirmPassword},on:{input:function(n){n.target.composing||(t.confirmPassword=n.target.value)}}})]),t._v(" "),s("button",{attrs:{type:"button"},on:{click:function(n){t.onTapBtn(t.accountExist)}}},[t._v(t._s(t.accountExist?"登  陆":"注册并登陆"))]),t._v(" "),t.accountExist?t._e():s("span",{staticClass:"change-bind",on:{click:function(n){t.changeLoginType()}}},[t._v("已有账号？前往登陆")]),t._v(" "),t.accountExist?s("span",{staticClass:"change-bind",on:{click:function(n){t.changeLoginType()}}},[t._v("暂无账号？前往注册")]):t._e(),t._v(" "),t.notice?s("notice",{attrs:{message:t.notice}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"logo-box"},[n("img",{attrs:{src:e("Z2Ou")}})])}]};var a=e("C7Lr")(c,i,!1,function(t){e("kviI")},"data-v-74e7b3ce",null);n.default=a.exports},"Jng+":function(t,n,e){t.exports=e.p+"static/img/decorate-register.6c80234.png"},Z2Ou:function(t,n,e){t.exports=e.p+"static/img/logo.cf26717.png"},kviI:function(t,n){}});
//# sourceMappingURL=7.a507cd3230700dc8ee61.js.map