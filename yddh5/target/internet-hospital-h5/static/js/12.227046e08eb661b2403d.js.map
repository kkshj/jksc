{"version":3,"sources":["webpack:///src/components/prescription/list.component.vue","webpack:///./src/components/prescription/list.component.vue?fbf0","webpack:///./src/components/prescription/list.component.vue"],"names":["list_component","name","components","NoticeDialog","notice_dialog_component","Notice","notice_component","Loading","loading_component","data","prescriptionList","notice","totalPages","currentPage","getting","computed","Object","vuex_esm","userId","state","this","$store","commit","JSON","parse","localStorage","getItem","header","activated","getInfo","methods","getPrescriptions","getMore","e","_this","target","srcElement","listHeight","$refs","offsetHeight","bottom","scrollTop","document","documentElement","setTimeout","page","_this2","url","$conf","$axios","get","headers","then","res","content","filter","p","orderTypeCode","statusCode","i","createdDate","slice","indexOf","amount","toString","length","concat","catch","err","response","message","jumpTo","route","id","$router","push","prescription_list_component","render","_vm","_h","$createElement","_c","_self","staticClass","on","scroll","attrs","src","_v","_e","ref","_l","item","class","click","$event","orderHeaderId","_s","organizationText","statusText","doctorName","patientName","departmentText","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+KA+CAA,GACAC,KAAA,OACAC,YACAC,aAAAC,EAAA,EACAC,OAAAC,EAAA,EACAC,QAAAC,EAAA,GAEAC,KAPA,WAQA,OACAC,oBACAC,OAAA,GACAC,WAAA,EACAC,YAAA,EACAC,SAAA,IAGAC,SAAAC,OAAAC,EAAA,EAAAD,EACAE,OADA,SACAC,GAIA,MAHA,KAAAA,EAAAD,QACAE,KAAAC,OAAAC,OAAA,UAAAC,KAAAC,MAAAC,aAAAC,QAAA,eAEAP,EAAAD,QAEAS,OAPA,SAOAR,GAIA,MAHA,KAAAA,EAAAQ,QACAP,KAAAC,OAAAC,OAAA,UAAAC,KAAAC,MAAAC,aAAAC,QAAA,eAEAP,EAAAQ,UAGAC,UA9BA,WA+BAR,KAAAS,WAEAC,SACAD,QADA,WAEAT,KAAAV,oBACAU,KAAAN,SAAA,EACAM,KAAAW,iBAAA,IAEAC,QANA,SAMAC,GAAA,IAAAC,EAAAd,KACA,IAAAA,KAAAN,QAAA,CACA,IAAAqB,EAAAF,EAAAE,QAAAF,EAAAG,WACAC,EAAAjB,KAAAkB,MAAA,QAAAC,aACAC,EAAAL,EAAAM,UAAAC,SAAAC,gBAAAJ,aACAnB,KAAAR,WAAA,GAAA4B,GAAAH,EAAA,KACAjB,KAAAN,SAAA,EACAM,KAAAW,iBAAAX,KAAAP,YAAA,IAEA,IAAAO,KAAAR,aACAQ,KAAAT,OAAA,QACAS,KAAAN,SAAA,EACA8B,WAAA,WACAV,EAAAvB,OAAA,IACA,QAKAoB,iBAzBA,SAyBAc,GAAA,IAAAC,EAAA1B,KACA2B,EAAA3B,KAAA4B,MAAAD,IAAA,sDAAA3B,KAAAF,OAAA,8IAAA2B,EAAA,gBACAzB,KAAA6B,OAAAC,IAAAH,GAAAI,QAAA/B,KAAAO,SAAAyB,KAAA,SAAAC,GACA,IAAAR,EACAC,EAAAlC,WAAAyC,EAAA5C,KAAAG,WAEAkC,EAAAlC,YAAA,EAEA,IAAA0C,EAAAD,EAAA5C,KAAA6C,QAAAC,OAAA,SAAAC,GAAA,uBAAAA,EAAAC,eAAA,mBAAAD,EAAAC,eAAA,WAAAD,EAAAE,aACA,QAAAC,KAAAL,EACAA,EAAAK,GAAAC,YAAAN,EAAAK,GAAAC,YAAAC,MAAA,EAAAP,EAAAK,GAAAC,YAAAE,QAAA,QACAR,EAAAK,GAAAI,QAAAT,EAAAK,GAAAI,OAAAC,WAAAF,QAAA,OACAR,EAAAK,GAAAI,OAAAT,EAAAK,GAAAI,OAAA,MACAT,EAAAK,GAAAI,QAAA,IAAAT,EAAAK,GAAAI,OAAAC,WAAAH,MAAAP,EAAAK,GAAAI,OAAAC,WAAAF,QAAA,QAAAG,SACAX,EAAAK,GAAAI,OAAAT,EAAAK,GAAAI,OAAA,KAGAjB,EAAApC,iBAAAoC,EAAApC,iBAAAwD,OAAAZ,GACAR,EAAAjC,YAAAgC,EACAC,EAAAhC,SAAA,IACAqD,MAAA,SAAAC,GACAtB,EAAAnC,OAAAyD,EAAAC,SAAA5D,KAAA6D,QACA1B,WAAA,WACAE,EAAAnC,OAAA,IACA,QAGA4D,OApDA,SAoDAC,EAAAC,GACArD,KAAAsD,QAAAC,KAAA,IAAAH,EAAA,IAAAC,MClIeG,GADEC,OAFjB,WAA0B,IAAAC,EAAA1D,KAAa2D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,OAAAC,IAAuBC,OAAAP,EAAA9C,WAAsB,IAAA8C,EAAApE,iBAAAuD,OAAAgB,EAAA,OAAgDE,YAAA,QAAkBF,EAAA,OAAYK,OAAOC,IAAA,0CAA8CT,EAAAU,GAAA,KAAAP,EAAA,QAAAH,EAAAU,GAAA,eAAAV,EAAAW,KAAAX,EAAAU,GAAA,KAAAV,EAAApE,iBAAAuD,OAAA,EAAAgB,EAAA,MAA+GS,IAAA,UAAAP,YAAA,WAAoCL,EAAAa,GAAAb,EAAA,0BAAAc,GAA8C,OAAAX,EAAA,MAAgBY,MAAA,YAAAD,EAAAlC,WAAA,kBAAAkC,EAAAlC,WAAA,iBAAA0B,IAAsHU,MAAA,SAAAC,GAAyBjB,EAAAP,OAAA,eAAAqB,EAAAI,mBAAiDf,EAAA,OAAYE,YAAA,UAAoBF,EAAA,OAAAA,EAAA,QAAuBE,YAAA,SAAmBL,EAAAU,GAAAV,EAAAmB,GAAAL,EAAAM,qBAAApB,EAAAU,GAAA,KAAAP,EAAA,QAAiEE,YAAA,UAAoBL,EAAAU,GAAAV,EAAAmB,GAAAL,EAAAO,iBAAArB,EAAAU,GAAA,KAAAP,EAAA,OAAAA,EAAA,QAAuEE,YAAA,SAAmBL,EAAAU,GAAA,QAAAV,EAAAmB,GAAAL,EAAAQ,eAAAtB,EAAAU,GAAA,KAAAP,EAAA,QAAmEE,YAAA,SAAmBL,EAAAU,GAAA,UAAAV,EAAAmB,GAAAL,EAAAhC,oBAAAkB,EAAAU,GAAA,KAAAP,EAAA,OAAyEE,YAAA,YAAsBF,EAAA,OAAAA,EAAA,SAAAH,EAAAU,GAAA,QAAAV,EAAAU,GAAA,KAAAP,EAAA,QAAAH,EAAAU,GAAAV,EAAAmB,GAAAL,EAAAS,kBAAAvB,EAAAU,GAAA,KAAAP,EAAA,OAAAA,EAAA,SAAAH,EAAAU,GAAA,QAAAV,EAAAU,GAAA,KAAAP,EAAA,QAAAH,EAAAU,GAAAV,EAAAmB,GAAAL,EAAAU,qBAAAxB,EAAAU,GAAA,KAAAP,EAAA,OAAAA,EAAA,OAAmPE,YAAA,SAAmBF,EAAA,SAAAH,EAAAU,GAAA,UAAAV,EAAAU,GAAA,KAAAP,EAAA,QAAAH,EAAAU,GAAA,IAAAV,EAAAmB,GAAAL,EAAA7B,aAAAe,EAAAU,GAAA,gBAAAI,EAAAlC,YAAA,YAAAkC,EAAAlC,WAAAuB,EAAA,UAAmLE,YAAA,UAAoBL,EAAAU,GAAA,SAAAV,EAAAW,cAAiCX,EAAAW,KAAAX,EAAAU,GAAA,KAAAV,EAAA,OAAAG,EAAA,UAAkDK,OAAOhB,QAAAQ,EAAAnE,UAAsBmE,EAAAW,MAAA,IAEroDc,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE1G,EACA4E,GATF,EAVA,SAAA+B,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/12.227046e08eb661b2403d.js","sourcesContent":["<template>\r\n  <div class=\"page\" @scroll=\"getMore\">\r\n    <div class='emp' v-if='prescriptionList.length === 0'>\r\n      <img src='static/images/empty-prescription.png'>\r\n      <span>你还没有处方笺</span>\r\n    </div>\r\n\r\n    <ul ref=\"listBox\" class='section' v-if=\"prescriptionList.length > 0\">\r\n      <li v-for='item in prescriptionList' :class=\"item.statusCode === ('EXPIRED' || 'REFUNDED')  ? 'stoped' : item.statusCode === 'SEND' ? 'finish' : 'unpay'\" @click='jumpTo(\"prescription\", item.orderHeaderId)'>\r\n        <div class='title'>\r\n          <div>\r\n            <span class='left'>{{item.organizationText}}</span>\r\n            <span class='right'>{{item.statusText}}</span>\r\n          </div>\r\n          <div>\r\n            <span class='left'>医生 | {{item.doctorName}}</span>\r\n            <span class='left'>开方日期 | {{item.createdDate}}</span>\r\n          </div>\r\n        </div>\r\n        <div class='contain'>\r\n          <div>\r\n            <label>姓名</label>\r\n            <span>{{item.patientName}}</span>\r\n          </div>\r\n          <div>\r\n            <label>科室</label>\r\n            <span>{{item.departmentText}}</span>\r\n          </div>\r\n          <div>\r\n            <div class='left'>\r\n              <label>药品总额</label>\r\n              <span>￥{{item.amount}}</span>\r\n            </div>\r\n            <button v-if='item.statusCode === \"SIGNED\" || item.statusCode === \"AUDITED\"' class='right'>去付款</button>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <notice v-if=\"notice\" :message=\"notice\"></notice>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import NoticeDialog from '../notice-dialog.component'\r\n  import Notice from '../notice.component'\r\n  import Loading from '../loading.component'\r\n  import { mapState } from 'vuex'\r\n  export default {\r\n    name: \"list\",\r\n    components: {\r\n      NoticeDialog,\r\n      Notice,\r\n      Loading\r\n    },\r\n    data () {\r\n        return {\r\n          prescriptionList: [],\r\n          notice: '',\r\n          totalPages: 0,\r\n          currentPage: 1,\r\n          getting: false\r\n        }\r\n    },\r\n    computed: mapState({\r\n      userId (state) {\r\n        if (state.userId === '') {\r\n          this.$store.commit('setUser', JSON.parse(localStorage.getItem('loginInfo')));\r\n        }\r\n        return state.userId\r\n      },\r\n      header (state) {\r\n        if (state.header === '') {\r\n          this.$store.commit('setUser', JSON.parse(localStorage.getItem('loginInfo')));\r\n        }\r\n        return state.header\r\n      }\r\n    }),\r\n    activated () {\r\n      this.getInfo();\r\n    },\r\n    methods: {\r\n      getInfo () {\r\n        this.prescriptionList = [];\r\n        this.getting = true;\r\n        this.getPrescriptions(1);\r\n      },\r\n      getMore (e) {\r\n        if (!this.getting) {\r\n          let target = e.target || e.srcElement;\r\n          let listHeight = this.$refs['listBox'].offsetHeight;\r\n          let bottom = target.scrollTop + document.documentElement.offsetHeight;\r\n          if (this.totalPages > 0 && (bottom >= listHeight - 200)) {\r\n            this.getting = true;\r\n            this.getPrescriptions(this.currentPage + 1)\r\n          } else {\r\n            if (this.totalPages === 0) {\r\n              this.notice = '没有更多了';\r\n              this.getting = true;\r\n              setTimeout(()=>{\r\n                this.notice = ''\r\n              }, 2000)\r\n            }\r\n          }\r\n        }\r\n      },\r\n      getPrescriptions(page) {\r\n        const url = `${this.$conf.url}/internethospital/api/orders/prescriptions?user-id=${this.userId}&status=SIGNED&status=PAYED&status=PUSH_FAILED&status=PUSH_SUCCEED&status=AUDITED&status=SHIPPED&status=REFUNDED&status=EXPIRED&page-index=${page}&page-size=10`;\r\n        this.$axios.get(url, {headers: this.header}).then(res => {\r\n          if (page === 1) {\r\n            this.totalPages = res.data.totalPages;\r\n          } else {\r\n            this.totalPages -= 1;\r\n          }\r\n          let content = res.data.content.filter(p => p.orderTypeCode === 'PRESCRIPTION' || (p.orderTypeCode === 'E_PRESCRIPTION' && p.statusCode !== 'SIGNED' ));\r\n          for (let i in content) {\r\n            content[i].createdDate = content[i].createdDate.slice(0, content[i].createdDate.indexOf(' ') + 1)\r\n            if (content[i].amount && content[i].amount.toString().indexOf('.') < 0) {\r\n              content[i].amount = '' + content[i].amount + '.00';\r\n            } else if (content[i].amount && content[i].amount.toString().slice(content[i].amount.toString().indexOf('.') + 1).length !== 2) {\r\n              content[i].amount = '' + content[i].amount + '0';\r\n            }\r\n          }\r\n          this.prescriptionList = this.prescriptionList.concat(content);\r\n          this.currentPage = page;\r\n          this.getting = false;\r\n        }).catch(err => {\r\n          this.notice = err.response.data.message;\r\n          setTimeout(()=>{\r\n            this.notice = ''\r\n          }, 2000)\r\n        })\r\n      },\r\n      jumpTo(route, id) {\r\n        this.$router.push(`/${route}/${id}`);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @function vm($px) {\r\n    @return ($px / 750) * 100vw;\r\n  }\r\n  li{\r\n    display: block;\r\n    width: vm(690);\r\n    height: vm(320);\r\n    border-radius: vm(8);\r\n    background-color: #ffffff;\r\n    margin: vm(30) auto;\r\n  }\r\n  li>.title{\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: vm(120);\r\n    padding: vm(18) vm(30) 0 vm(30);\r\n    color: #ffffff;\r\n  }\r\n  li>.title>div::after{\r\n    content: '';\r\n    display: block;\r\n    clear: both;\r\n  }\r\n  li>.title>div:first-child>span.left{\r\n    font-size: vm(32);\r\n  }\r\n  li>.title>div:first-child>span.right{\r\n    font-size: vm(28);\r\n  }\r\n  li>.title>div:last-child{\r\n    font-size: vm(26);\r\n    margin-top: vm(14);\r\n  }\r\n  li>.title>div:last-child>span{\r\n    margin-right: vm(100);\r\n  }\r\n  li>.contain{\r\n    box-sizing: border-box;\r\n    font-size: vm(28);\r\n    padding: 0 vm(30);\r\n  }\r\n  li>.contain>div{\r\n    margin-top: vm(14);\r\n  }\r\n  li>.contain>div:last-child{\r\n    border-top: #e2e2e2 vm(1) solid;\r\n    line-height: vm(80);\r\n    color: #8f8f8f;\r\n  }\r\n  li>.contain>div:last-child button{\r\n    width: vm(120);\r\n    height: vm(48);\r\n    color: #FE9B00;\r\n    border: #FE9B00 1px solid;\r\n    border-radius: vm(4);\r\n    font-size: vm(28);\r\n    padding: 0;\r\n    margin-top: vm(18);\r\n    line-height: vm(48);\r\n    background-color: transparent;\r\n  }\r\n  li>.contain>div::after{\r\n    content: '';\r\n    display: block;\r\n    clear: both;\r\n  }\r\n  li>.contain label{\r\n    color: #999999;\r\n    margin-right: vm(20);\r\n  }\r\n  li.unpay>.title{\r\n    background-color: rgba(22, 169, 246, .8);\r\n  }\r\n  li.finish>.title{\r\n    background-color: rgba(22, 169, 246, .8);\r\n  }\r\n  li.stoped>.title{\r\n    background-color: #C8C8C8;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/prescription/list.component.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\",on:{\"scroll\":_vm.getMore}},[(_vm.prescriptionList.length === 0)?_c('div',{staticClass:\"emp\"},[_c('img',{attrs:{\"src\":\"static/images/empty-prescription.png\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"你还没有处方笺\")])]):_vm._e(),_vm._v(\" \"),(_vm.prescriptionList.length > 0)?_c('ul',{ref:\"listBox\",staticClass:\"section\"},_vm._l((_vm.prescriptionList),function(item){return _c('li',{class:item.statusCode === ('EXPIRED' || 'REFUNDED')  ? 'stoped' : item.statusCode === 'SEND' ? 'finish' : 'unpay',on:{\"click\":function($event){_vm.jumpTo(\"prescription\", item.orderHeaderId)}}},[_c('div',{staticClass:\"title\"},[_c('div',[_c('span',{staticClass:\"left\"},[_vm._v(_vm._s(item.organizationText))]),_vm._v(\" \"),_c('span',{staticClass:\"right\"},[_vm._v(_vm._s(item.statusText))])]),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"left\"},[_vm._v(\"医生 | \"+_vm._s(item.doctorName))]),_vm._v(\" \"),_c('span',{staticClass:\"left\"},[_vm._v(\"开方日期 | \"+_vm._s(item.createdDate))])])]),_vm._v(\" \"),_c('div',{staticClass:\"contain\"},[_c('div',[_c('label',[_vm._v(\"姓名\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.patientName))])]),_vm._v(\" \"),_c('div',[_c('label',[_vm._v(\"科室\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.departmentText))])]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"left\"},[_c('label',[_vm._v(\"药品总额\")]),_vm._v(\" \"),_c('span',[_vm._v(\"￥\"+_vm._s(item.amount))])]),_vm._v(\" \"),(item.statusCode === \"SIGNED\" || item.statusCode === \"AUDITED\")?_c('button',{staticClass:\"right\"},[_vm._v(\"去付款\")]):_vm._e()])])])})):_vm._e(),_vm._v(\" \"),(_vm.notice)?_c('notice',{attrs:{\"message\":_vm.notice}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-941f3254\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/prescription/list.component.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-941f3254\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./list.component.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.component.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./list.component.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-941f3254\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./list.component.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-941f3254\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/prescription/list.component.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}