webpackJsonp([12],{LP5T:function(t,e){},rmZk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mMon"),a=s("eoeZ"),n=s("uVW5"),o=s("9rMa"),r={name:"list",components:{NoticeDialog:i.a,Notice:a.a,Loading:n.a},data:function(){return{prescriptionList:[],notice:"",totalPages:0,currentPage:1,getting:!1}},computed:Object(o.b)({userId:function(t){return""===t.userId&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.userId},header:function(t){return""===t.header&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.header}}),activated:function(){this.getInfo()},methods:{getInfo:function(){this.prescriptionList=[],this.getting=!0,this.getPrescriptions(1)},getMore:function(t){var e=this;if(!this.getting){var s=t.target||t.srcElement,i=this.$refs.listBox.offsetHeight,a=s.scrollTop+document.documentElement.offsetHeight;this.totalPages>0&&a>=i-200?(this.getting=!0,this.getPrescriptions(this.currentPage+1)):0===this.totalPages&&(this.notice="没有更多了",this.getting=!0,setTimeout(function(){e.notice=""},2e3))}},getPrescriptions:function(t){var e=this,s=this.$conf.url+"/internethospital/api/orders/prescriptions?user-id="+this.userId+"&status=SIGNED&status=PAYED&status=PUSH_FAILED&status=PUSH_SUCCEED&status=AUDITED&status=SHIPPED&status=REFUNDED&status=EXPIRED&page-index="+t+"&page-size=10";this.$axios.get(s,{headers:this.header}).then(function(s){1===t?e.totalPages=s.data.totalPages:e.totalPages-=1;var i=s.data.content.filter(function(t){return"PRESCRIPTION"===t.orderTypeCode||"E_PRESCRIPTION"===t.orderTypeCode&&"SIGNED"!==t.statusCode});for(var a in i)i[a].createdDate=i[a].createdDate.slice(0,i[a].createdDate.indexOf(" ")+1),i[a].amount&&i[a].amount.toString().indexOf(".")<0?i[a].amount=i[a].amount+".00":i[a].amount&&2!==i[a].amount.toString().slice(i[a].amount.toString().indexOf(".")+1).length&&(i[a].amount=i[a].amount+"0");e.prescriptionList=e.prescriptionList.concat(i),e.currentPage=t,e.getting=!1}).catch(function(t){e.notice=t.response.data.message,setTimeout(function(){e.notice=""},2e3)})},jumpTo:function(t,e){this.$router.push("/"+t+"/"+e)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page",on:{scroll:t.getMore}},[0===t.prescriptionList.length?s("div",{staticClass:"emp"},[s("img",{attrs:{src:"static/images/empty-prescription.png"}}),t._v(" "),s("span",[t._v("你还没有处方笺")])]):t._e(),t._v(" "),t.prescriptionList.length>0?s("ul",{ref:"listBox",staticClass:"section"},t._l(t.prescriptionList,function(e){return s("li",{class:"EXPIRED"===e.statusCode?"stoped":"SEND"===e.statusCode?"finish":"unpay",on:{click:function(s){t.jumpTo("prescription",e.orderHeaderId)}}},[s("div",{staticClass:"title"},[s("div",[s("span",{staticClass:"left"},[t._v(t._s(e.organizationText))]),t._v(" "),s("span",{staticClass:"right"},[t._v(t._s(e.statusText))])]),t._v(" "),s("div",[s("span",{staticClass:"left"},[t._v("医生 | "+t._s(e.doctorName))]),t._v(" "),s("span",{staticClass:"left"},[t._v("开方日期 | "+t._s(e.createdDate))])])]),t._v(" "),s("div",{staticClass:"contain"},[s("div",[s("label",[t._v("姓名")]),t._v(" "),s("span",[t._v(t._s(e.patientName))])]),t._v(" "),s("div",[s("label",[t._v("科室")]),t._v(" "),s("span",[t._v(t._s(e.departmentText))])]),t._v(" "),s("div",[s("div",{staticClass:"left"},[s("label",[t._v("药品总额")]),t._v(" "),s("span",[t._v("￥"+t._s(e.amount))])]),t._v(" "),"SIGNED"===e.statusCode||"AUDITED"===e.statusCode?s("button",{staticClass:"right"},[t._v("去付款")]):t._e()])])])})):t._e(),t._v(" "),t.notice?s("notice",{attrs:{message:t.notice}}):t._e()],1)},staticRenderFns:[]};var u=s("C7Lr")(r,c,!1,function(t){s("LP5T")},"data-v-941f3254",null);e.default=u.exports}});
//# sourceMappingURL=12.227046e08eb661b2403d.js.map