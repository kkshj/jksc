webpackJsonp([27],{FEVg:function(t,e){},hJPo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mMon"),s=a("eoeZ"),o=a("uVW5"),n=a("9rMa"),r={data:function(){return{message:"",load_show:!1,notice_show:"",hospitalArr:[],hospital:0,id:"",cardNumber:"",orderHeaderId:"",cards:"",alert:!1,patient:"请选择"}},components:{NoticeDialog:i.a,Notice:s.a,Loading:o.a},computed:Object(n.b)({header:function(t){return""===t.header&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.header}}),activated:function(){this.$store.commit("changePageType","package-page");var t=this.$route.params;this.getInfo(t)},methods:{getInfo:function(t){this.id=t.id,this.getFirstInfo()},changePatients:function(t){var e=this.hospitalArr.find(function(e){return e.id===t});console.log(e),this.patient=e.text,this.alert=!1},changeSpan:function(){this.orderHeaderId||(this.alert=!0)},getFirstInfo:function(){var t=this,e=this.$conf.url+"/internethospital/api/organizations?page-index=1&page-size=10000";this.$axios.get(e,{headers:this.$store.state.header}).then(function(e){console.log(e),t.hospitalArr=e.data.content})},inputMedicalCard:function(t){this.cardNumber=t},create:function(){var t=this,e=this.$conf.url+"/internethospital/api/patients/"+this.id+"/medical-cards",a={hospitalId:this.hospitalArr[this.hospital].id,cardNumber:this.cardNumber};this.$axios.post(e,a,{headers:this.$store.state.header}).then(function(e){console.log(e),t.notice_show="创建成功",setTimeout(function(){t.notice_show="",t.$router.back()},2e3)})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("span",{staticClass:"title"},[t._v("请绑定就诊本人的就诊卡")]),t._v(" "),a("div",[a("div",{staticClass:"form-item",on:{click:t.changeSpan}},[a("label",{staticClass:"left"},[t._v("就诊医院")]),t._v(" "),a("div",[t._v(t._s(t.patient))])]),t._v(" "),a("div",{staticClass:"form-item"},[a("label",{staticClass:"left"},[t._v("就诊卡号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cards,expression:"cards"}],staticClass:"right",attrs:{placeholder:"请输入就诊卡号",maxlength:"-1",type:"text"},domProps:{value:t.cards},on:{input:[function(e){e.target.composing||(t.cards=e.target.value)},function(e){t.inputMedicalCard(t.cards)}]}})])]),t._v(" "),a("button",{staticClass:"operation",on:{click:t.create}},[t._v("保 存")]),t._v(" "),t.alert?a("div",{staticClass:"alert"},[a("div",t._l(t.hospitalArr,function(e,i){return a("button",{attrs:{"data-id":e.id},on:{click:function(a){t.changePatients(e.id)}}},[a("span",[t._v(t._s(e.text))])])}))]):t._e(),t._v(" "),a("notice",{directives:[{name:"show",rawName:"v-show",value:t.notice_show,expression:"notice_show"}],attrs:{message:t.notice_show}}),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.load_show,expression:"load_show"}]})],1)},staticRenderFns:[]};var d=a("C7Lr")(r,c,!1,function(t){a("FEVg")},"data-v-17d5f664",null);e.default=d.exports}});
//# sourceMappingURL=27.53e4416436902186e27e.js.map