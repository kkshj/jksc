webpackJsonp([11],{ItCD:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=o("mMon"),e=o("eoeZ"),s=o("uVW5"),a=o("9rMa"),r={data:function(){return{message:"",load_show:!1,notice_show:"",inquisitionInfo:null,hadCoupon:!0}},components:{NoticeDialog:n.a,Notice:e.a,Loading:s.a},computed:Object(a.b)({userInfo:function(t){return""===t.userInfo&&JSON.parse(localStorage.getItem("userInfo"))&&this.$store.commit("setUserInfo",JSON.parse(localStorage.getItem("userInfo"))),t.userInfo},header:function(t){return""===t.header&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.header},userId:function(t){return""===t.userId&&this.$store.commit("setUser",JSON.parse(localStorage.getItem("loginInfo"))),t.userId}}),beforeRouteLeave:function(t,i,o){(/doctor/.exec(t.path)||/payment/.exec(t.path))&&this.$destroy(),o()},activated:function(){this.$store.commit("changePageType","package-page");var t=this.$route.params;console.log(t),this.getInfo(t)},methods:{getInfo:function(t){localStorage.removeItem("useThisCoupon"),this.getFirstInfo(t.id)},getFirstInfo:function(t){var i=this,o=this.$conf.url+"/internethospital/api/orders/consultations?user-id="+this.userId+"&page-index=1&page-size=1000";this.$axios.get(o,{headers:this.$store.state.header}).then(function(o){console.log(o);var n=o.data.content.find(function(i){return i.orderHeaderId===t});console.log(1),n.doctorAvatar||n.nurseAvatar?(console.log(3),n.doctorAvatar&&n.doctorAvatar.indexOf("qnfiles")>0&&(n.doctorAvatar=n.doctorAvatar+"-doctor_list"),n.nurseAvatar&&n.nurseAvatar.indexOf("qnfiles")>0&&(n.nurseAvatar=n.nurseAvatar+"-doctor_list")):(console.log(2),n.doctorAvatar="/static/images/defualt-header.png"),n&&n.amount&&n.amount.toString().indexOf(".")<0?n.amount=n.amount+".00":n&&n.amount&&2!==n.amount.toString().slice(n.amount.toString().indexOf(".")+1).length&&(n.amount=n.amount+"0"),n&&n.originalAmount&&n.originalAmount.toString().indexOf(".")<0?n.originalAmount=n.originalAmount+".00":n&&n.originalAmount&&2!==n.originalAmount.toString().slice(n.originalAmount.toString().indexOf(".")+1).length&&(n.originalAmount=n.originalAmount+"0"),n&&n.coupontAmount&&(n.coupontAmount=n.coupontAmount.toString().replace("-","")),console.log(n),i.inquisitionInfo=n})},cancelOrder:function(t){var i=this,o=this.$conf.url+"/internethospital/api/orders/"+t+"/statuses/CANCEL";this.$axios.post(o,{},{headers:this.$store.state.header}).then(function(t){i.notice_show="订单取消成功",setTimeout(function(){i.notice_show="",i.$router.back()},2e3)}).catch(function(t){i.notice_show=t.response.data.message,setTimeout(function(){i.notice_show=""},2e3)})},jumpTo:function(t){this.$store.commit("changePageType","package-page");var i=void 0;this.inquisitionInfo.doctorName&&(i="/doctor/"+this.inquisitionInfo.doctorId+"/payment"),this.inquisitionInfo.nurseName&&(i="/nurse/"+this.inquisitionInfo.nurseId+"/payment"),i=i+"?orderHeaderId="+t,this.$router.push(i)}}},u={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return t.inquisitionInfo?o("div",{staticClass:"page"},[o("div",{staticClass:"doctor"},[o("img",{staticClass:"left",attrs:{src:t.inquisitionInfo.doctorAvatar||t.inquisitionInfo.nurseAvatar}}),t._v(" "),o("div",{staticClass:"left"},[o("div",[o("span",{staticClass:"left"},[t._v(t._s(t.inquisitionInfo.doctorName||t.inquisitionInfo.nurseName))]),t._v(" "),t.inquisitionInfo.doctorPositionalTitleText||t.inquisitionInfo.nursePositionalTitleText?o("span",{staticClass:"left"},[t._v(t._s(t.inquisitionInfo.doctorPositionalTitleText||t.inquisitionInfo.nursePositionalTitleText))]):t._e(),t._v(" "),o("span",{staticClass:"right"},[t._v(t._s(t.inquisitionInfo.statusText))])]),t._v(" "),o("div",[o("span",[t._v(t._s(t.inquisitionInfo.organizationText))]),o("span",[t._v(t._s(t.inquisitionInfo.departmentText))])])])]),t._v(" "),o("div",{staticClass:"form"},[o("div",[o("label",{staticClass:"left"},[t._v("就诊人 :")]),t._v(" "),o("span",{staticClass:"right"},[t._v(t._s(t.inquisitionInfo.patientName))])]),t._v(" "),o("div",[o("label",{staticClass:"left"},[t._v("下单时间 :")]),t._v(" "),o("span",{staticClass:"right"},[t._v(t._s(t.inquisitionInfo.createdDate))])]),t._v(" "),o("div",[o("label",{staticClass:"left"},[t._v("问诊单号 :")]),t._v(" "),o("span",{staticClass:"right"},[t._v(t._s(t.inquisitionInfo.orderHeaderNumber))])]),t._v(" "),t.hadCoupon?o("div",[o("label",{staticClass:"left"},[t._v("问诊费 :")]),t._v(" "),o("span",{staticClass:"right"},[t._v("￥"+t._s(t.inquisitionInfo.originalAmount||0))])]):t._e(),t._v(" "),t.hadCoupon?o("div",[o("label",{staticClass:"left"},[t._v("优惠券 :")]),t._v(" "),o("span",{staticClass:"right"},[t._v("-￥"+t._s(t.inquisitionInfo.coupontAmount||0))])]):t._e(),t._v(" "),o("div",[o("label",{staticClass:"left"},[t._v(t._s("CREATED"===t.inquisitionInfo.statusCode?"应付":"实付")+"金额 :")]),t._v(" "),o("span",{staticClass:"right"},[t._v("￥"+t._s(t.inquisitionInfo.amount||0))])])]),t._v(" "),"CREATED"===t.inquisitionInfo.statusCode?o("div",{staticClass:"btn-box"},[o("button",{staticClass:"left",attrs:{"data-id":t.inquisitionInfo.orderHeaderId},on:{click:function(i){t.cancelOrder(t.inquisitionInfo.orderHeaderId)}}},[t._v("取消订单")]),t._v(" "),o("button",{staticClass:"left",attrs:{"data-id":t.inquisitionInfo.orderHeaderId},on:{click:function(i){t.jumpTo(t.inquisitionInfo.orderHeaderId)}}},[t._v("去付款")])]):t._e(),t._v(" "),o("notice",{directives:[{name:"show",rawName:"v-show",value:t.notice_show,expression:"notice_show"}],attrs:{message:t.notice_show}}),t._v(" "),o("loading",{directives:[{name:"show",rawName:"v-show",value:t.load_show,expression:"load_show"}]})],1):t._e()},staticRenderFns:[]};var c=o("C7Lr")(r,u,!1,function(t){o("eCX4")},"data-v-b6536ea6",null);i.default=c.exports},eCX4:function(t,i){}});
//# sourceMappingURL=11.b2b3767670e3b64b0d1e.js.map